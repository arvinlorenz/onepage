<!DOCTYPE html>
<html>
  <head>
    <title></title>
    <link rel="stylesheet" href="styles/kendo.common.min.css" />
    <link rel="stylesheet" href="styles/kendo.default.min.css" />
    <link rel="stylesheet" href="styles/kendo.default.mobile.min.css" />

    <script src="js/jquery.min.js"></script>

    <script src="js/kendo.all.min.js"></script>
  </head>
  <body>
    <div id="example" class="k-content">
      <div id="appbar"></div>
      <div class="demo-section k-content wide">
        <div id="htmlView"></div>
        <div id="editorView">
          <textarea
            id="editor"
            rows="10"
            cols="30"
            style="width: 100%; height: 840px"
            aria-label="editor"
          >
          </textarea>
        </div>

        <script>
          var stringData = $.ajax({
            url: 'http://122.199.31.38/htmlData',
            async: false,
          }).responseText
          $('#editor').html(stringData).replace(/\n/g, '<br />')
        </script>
        <script>
          let editorData = ''

          console.log(editorData)
          var editor = $('#editor').kendoEditor({
            change: function (e) {
              editorData = this.value()
            },
            stylesheets: ['styles/editor.css'],
            tools: [
              'bold',
              'italic',
              'underline',
              'justifyLeft',
              'justifyCenter',
              'justifyRight',
              'insertUnorderedList',
              'createLink',
              'unlink',
              'insertImage',
              'tableWizard',
              'createTable',
              'addRowAbove',
              'addRowBelow',
              'addColumnLeft',
              'addColumnRight',
              'deleteRow',
              'deleteColumn',
              'mergeCellsHorizontally',
              'mergeCellsVertically',
              'splitCellHorizontally',
              'splitCellVertically',
              'tableAlignLeft',
              'tableAlignCenter',
              'tableAlignRight',
              'formatting',
              {
                name: 'fontName',
                items: [
                  { text: 'Andale Mono', value: 'Andale Mono' },
                  { text: 'Arial', value: 'Arial' },
                  { text: 'Arial Black', value: 'Arial Black' },
                  { text: 'Book Antiqua', value: 'Book Antiqua' },
                  { text: 'Comic Sans MS', value: 'Comic Sans MS' },
                  { text: 'Courier New', value: 'Courier New' },
                  { text: 'Georgia', value: 'Georgia' },
                  { text: 'Helvetica', value: 'Helvetica' },
                  { text: 'Impact', value: 'Impact' },
                  { text: 'Symbol', value: 'Symbol' },
                  { text: 'Tahoma', value: 'Tahoma' },
                  { text: 'Terminal', value: 'Terminal' },
                  { text: 'Times New Roman', value: 'Times New Roman' },
                  { text: 'Trebuchet MS', value: 'Trebuchet MS' },
                  { text: 'Verdana', value: 'Verdana' },
                ],
              },
              'fontSize',
              'foreColor',
              'backColor',
            ],
          })
          editorData = editor[0].innerText
        </script>
        <script>
          $('#appbar').kendoAppBar({
            items: [
              { template: '<h3>AppBar Demo</h3>', type: 'contentItem' },
              { width: 16, type: 'spacer' },
              {
                template:
                  '<button id="primaryTextButton" class="k-primary">Save</button>',
                type: 'contentItem',
              },
            ],
          })
        </script>

        <script>
          $('#htmlView').hide()
          $('#primaryTextButton').kendoButton({
            click: (e) => {
              if (e.event.target.innerText == 'Edit') {
                $('#primaryTextButton').text('Save')
                $('#htmlView').hide()
                $('#editorView').show()
              } else {
                $.post(
                  'http://122.199.31.38/htmlData',
                  { data: editorData.toString() },
                  function (data) {
                    console.log(data)
                  }
                )
                $('#primaryTextButton').text('Edit')
                $('#editorView').hide()
                $('#htmlView').show()
                $('#htmlView').html(editorData)
              }
            },
          })
        </script>
      </div>
    </div>
  </body>
</html>
